<style>
  td {
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .use-cases {
    width: 100%;
    table-layout: fixed;
  }

  .use-cases .header {
    background: rgb(187, 185, 185)
  }

  .use-cases .collapse {
    width: 16px;
  }

  .use-cases {
    padding: 12px 0;
  }

  .use-cases .id-name {
    width: 190px;
  }

  .use-cases .actions {
    width: 60px;
    align: right;
  }

  .use-cases .group .use-case:not(:first-child) .expand.icon,
  .use-cases .group:not(.expanded) .use-case:not(:first-child) {
    display: none;
    border-top: 40px solid white;
  }

  tbody tr.use-case:nth-child(odd) {
    background-color: rgb(230, 230, 230);
  }

  button.mainIcon {
    padding: 5px;
  }
</style>

<script>
  // Shows or hides all use cases in sidebar.
  function toggleListView() {
    
    if (document.getElementById("toggleAll").className == "fas fa-chevron-down") {
      document.getElementsByClassName("fas fa-chevron-down")[0].className = "fas fa-chevron-up";
      var categories = document.getElementsByClassName("group sidebar");
      for (var i = 0; i < categories.length; i++) {
        categories[i].className = "group sidebar expanded";
      }
    } else {
      document.getElementsByClassName("fas fa-chevron-up")[0].className = "fas fa-chevron-down";
      var categories = document.getElementsByClassName("group sidebar expanded");
      while (categories.length > 0) {
        categories[0].className = "group sidebar";
      }
    }
  }
</script>

{{!-- Search Bar, Create New Use Case, Refresh List, and Toggle List icons --}}
<input class="public" id="use-cases" placeholder="Search use cases"
  onchange="fireEvent(event, 'list-use-cases', this.value)">
<button class="mainIcon" title="create a new use case" onclick="fireEvent(event, 'new-use-case', 0)"><i class="fas fa-plus"></i></button>
<button class="mainIcon" title="refresh list" onclick="fireEvent(event, 'list-use-cases', 0)"><i class="fas fa-sync-alt"></i></button>
<button class="mainIcon" title="toggle list" onclick="toggleListView()"><i id="toggleAll" class="fas fa-chevron-down"></i></button>
<br>

{{!-- Use cases get populated below --}}
<table class="use-cases">
  {{#each grouped}}
  <tbody class="group sidebar">
    <!-- {{@key}} {{this.count}} -->
    <td class="collapse">
      <button class="expand icon" onclick="this.closest('.group').classList.toggle('expanded')">
        <i class="fas fa-angle-up"></i>
      </button>
    </td>
    <td class="id-name"><b>{{@key}} ({{this.count}})</b></td>
    <td></td>
    {{#each this.data}}
    <tr class="use-case">
      <td></td>
      <td class="id-name {{this.id}}">({{this.id}}) {{this.name}}</td>
      <td class="actions">
        <button class="icon" onclick="fireEvent(event, 'activate-use-case', {{this.id}})">
          <i class="fas fa-play" title="run it"></i>
        </button>
        <button class="icon" onclick="fireEvent(event, 'new-use-case', {{this.id}})">
          <i class="fas fa-copy" title="duplicate it"></i>
        </button>
        <button class="icon" onclick="fireEvent(event, 'edit-use-case', {{this.id}})">
          <i class="fas fa-edit" title="edit it"></i>
        </button>
      </td>
    </tr>
    {{/each}}
  </tbody>
  {{/each}}